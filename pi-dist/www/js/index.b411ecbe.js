(function(e){function t(t){for(var i,a,u=t[0],s=t[1],c=t[2],l=0,d=[];l<u.length;l++)a=u[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);f&&f(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={index:0},o={index:0},r=[];function u(e){return s.p+"js/"+({help:"help","help-en":"help-en"}[e]||e)+"."+{"chunk-42269c3e":"cc8ac19d",help:"500838c8","help-en":"8ab21776"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-42269c3e":1,help:1,"help-en":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var i="css/"+({help:"help","help-en":"help-en"}[e]||e)+"."+{"chunk-42269c3e":"9c0d03b4",help:"94116199","help-en":"e89109c0"}[e]+".css",o=s.p+i,r=document.getElementsByTagName("link"),u=0;u<r.length;u++){var c=r[u],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===i||l===o))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){c=d[u],l=c.getAttribute("data-href");if(l===i||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var i=t&&t.target&&t.target.src||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=i,delete a[e],f.parentNode.removeChild(f),n(r)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var i=o[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,n){i=o[e]=[t,n]}));t.push(i[2]=r);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=u(e);var d=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",d.name="ChunkLoadError",d.type=i,d.request=a,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var f=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"07ac":function(e,t,n){},"24b4":function(e,t,n){"use strict";n("4bfd")},"325c":function(e,t,n){"use strict";(function(e){var i=n("1da1"),a=n("d4ec"),o=n("bee2"),r=(n("96cf"),n("d3b7"),n("fb6a"),n("99af"),n("b680"),n("25f0"),n("1276"),n("ac1f"),n("7db0"),n("466d"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ace4"),n("159b"),n("7039"),n("3d20")),u=n.n(r),s=n("c1df"),c=n.n(s),l=n("c50a"),d=n("748d"),f=6e5,p=function(){function t(){Object(a["a"])(this,t)}return Object(o["a"])(t,[{key:"uuid",value:function(){return Object(l["a"])()}},{key:"restart_ads_tm",value:function(){window.is_ads_tm=!1,setTimeout((function(){return window.is_ads_tm=!0}),f)}},{key:"randomInt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4294967295;return Math.floor(Math.random()*(t-e)+e)}},{key:"md5",value:function(e){return Object(d["a"])(e)}},{key:"get_stream",value:function(e){return new Promise((function(t,n){navigator.getUserMedia(e,(function(e){t(e)}),(function(){n()}))}))}},{key:"get_ext_of_file",value:function(e){return e.slice(e.lastIndexOf("."))}},{key:"show_success_top",value:function(e){u.a.fire({icon:"success",position:"top",text:e,timer:3e3})}},{key:"get_dir_from_path",value:function(e){return e.substring(0,e.lastIndexOf("/")+1)}},{key:"hasUserMedia",value:function(){return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,!!navigator.getUserMedia}},{key:"get_name_from_path",value:function(e){return e.substring(e.lastIndexOf("/")+1)}},{key:"get_order_id",value:function(){return"".concat(cli_id,"-").concat(c()().format("YYYYMMDDHHmmssSSS"))}},{key:"show_confirm_top",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:9;return new Promise((function(a,o){var r;u.a.fire({text:'<h2 style="text-align:center;">'.concat(e,"</h2>"),position:"top",showClass:{popup:"animate__animated animate__bounceIn"},hideClass:{popup:"animate__animated animate__bounceOut"},showConfirmButton:!0,showDenyButton:!0,confirmButtonText:t,denyButtonText:"".concat(n,"(<strong></strong>)"),timer:i,willOpen:function(){r=setInterval((function(){u.a.getContent().querySelector("strong").textContent=(u.a.getTimerLeft()/1e3).toFixed(0)}),500)},willClose:function(){clearInterval(r)}})}))}},{key:"show_alert_top",value:function(e){u.a.fire({position:"top",text:e})}},{key:"show_alert_top_tm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;u.a.fire({position:"top",text:e,timer:t})}},{key:"show_info_center_tm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;u.a.fire({icon:"info",position:"center",text:e,timer:t})}},{key:"show_warn_top",value:function(e){u.a.fire({icon:"warning",position:"top",text:e})}},{key:"show_error_top",value:function(e){u.a.fire({icon:"error",position:"top",text:e})}},{key:"get_close_cnns_buff",value:function(e,t){return this.get_close_buff(CPP_CMD.CLOSE_PEER_CNNS)}},{key:"get_close_cnns_home_buff",value:function(e,t){return this.get_close_buff(CPP_CMD.CLOSE_PEER_CNNS_HOME)}},{key:"get_close_buff",value:function(t,n,i){var a=e.alloc(38);return a[0]=t,a[1]=i,a.write(n,2,32),a}},{key:"now_str",value:function(){return c()().format("YYYY-MM-DD HH:mm:ss")}},{key:"hash_code",value:function(e){for(var t=0,n=0;n<e.length;n++)t=~~((t<<5)-t+e.charCodeAt(n));return t}},{key:"slice_n_from_end",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e.slice(e.length-t)}},{key:"post_json",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$.ajax({type:"POST",url:t,contentType:"application/json; charset=utf-8",data:JSON.stringify(n),dataType:"json"});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"timeout",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"post_local",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var i,a,o,r,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=u.length>2&&void 0!==u[2]?u[2]:3,!(i<=0)){e.next=3;break}return e.abrupt("return");case 3:return a=location.host||"127.0.0.1:".concat(this.http_port()),o="http://".concat(a,"/").concat(t),e.prev=5,e.next=8,$.ajax({type:"POST",url:o,contentType:"application/json; charset=utf-8",data:JSON.stringify(n),dataType:"json"});case 8:return r=e.sent,e.abrupt("return",r);case 12:return e.prev=12,e.t0=e["catch"](5),console.log("post_local url=".concat(o," failed, error=").concat(JSON.stringify(e.t0)," retry=").concat(i)),e.next=17,this.timeout(500);case 17:return e.next=19,this.post_local(t,n,i-1);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e,this,[[5,12]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"toHHMMSS",value:function(e){var t=parseInt(e,10),n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60),a=t-3600*n-60*i;return n<10&&(n="0"+n),i<10&&(i="0"+i),a<10&&(a="0"+a),n+":"+i+":"+a}},{key:"validateNum",value:function(e,t,n){var i=+e;return i>=t&&i<=n&&e===i.toString()}},{key:"wait_deviceready",value:function(){return new Promise((function(e,t){document.addEventListener("deviceready",(function(){e()}),!1)}))}},{key:"check_addr",value:function(e){var t=this,n=e.split(":");if(2!=n.length)return!1;var i=n[0].split("."),a=n[1];return this.validateNum(a,1,65535)&&4==i.length&&i.every((function(e){return t.validateNum(e,0,255)}))}},{key:"path2url",value:function(e){return this.store_url()+"/"+e}},{key:"ss_addrs",value:function(){return db.ss.find({})}},{key:"http_port",value:function(){var e=db.svr.findOne({});return e.http_port}},{key:"socks_port",value:function(){var e=db.svr.findOne({});return e.socks_port}},{key:"store_url",value:function(){var e,t=window.location,n=t.host;return"https:"===t.protocol||"http:"===t.protocol?e=t.protocol:(e="http:",n="localhost:".concat(this.http_port())),e+="//"+n+"/store",e}},{key:"formatFileSize",value:function(e,t){if(0==e)return"0 Bytes";var n=1e3,i=t||2,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,o)).toFixed(i))+" "+a[o]}},{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;return _.truncate(e,{length:t})}},{key:"match_unicode",value:function(e){var t=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])+/;return e.match(t)}},{key:"reset_cd",value:function(e){db.cooldown.findAndUpdate({},(function(t){t[e].current=t[e].caption,vm.$emit(e,t[e].current)}))}},{key:"start_cd",value:function(e){db.cooldown.findAndUpdate({},(function(t){return t[e].current=t[e].countdown}));var t=db.cooldown.findOne({});vm.$emit(e,t[e].current)}},{key:"is_valid_email",value:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}},{key:"is_valid_price",value:function(e){var t=/^\d+(?:[.]\d{1,2})?$/;return t.test(e)}},{key:"is_num",value:function(e){var t=/^[0-9]+$/;return t.test(e)}},{key:"dataURLToBlob",value:function(e){var t=";base64,";if(-1==e.indexOf(t)){var n=e.split(","),i=n[0].split(":")[1],a=n[1];return new File([a],"img.jpg",{type:i})}for(var o=e.split(t),r=o[0].split(":")[1],u=window.atob(o[1]),s=u.length,c=new Uint8Array(s),l=0;l<s;++l)c[l]=u.charCodeAt(l);return new File([c],"img.jpg",{type:r})}},{key:"resize_img_file",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return new Promise((function(n,i){var a=new Image;a.onload=function(e){var i=document.createElement("canvas"),o=a.width,r=a.height;o>r?o>t&&(r*=t/o,o=t):r>t&&(o*=t/r,r=t),i.width=o,i.height=r,i.getContext("2d").drawImage(a,0,0,o,r);var u=i.toDataURL("image/jpeg");n(u)},a.src=e}))}},{key:"in_mobile",value:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}},{key:"in_mobile_or_tablet",value:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}},{key:"in_wx",value:function(){var e=window.navigator.userAgent.toLowerCase();return this.in_mobile()&&"micromessenger"==e.match(/MicroMessenger/i)}}]),t}();"toJSON"in Error.prototype||Object.defineProperty(Error.prototype,"toJSON",{value:function(){var e={};return Object.getOwnPropertyNames(this).forEach((function(t){e[t]=this[t]}),this),e},configurable:!0,writable:!0}),t["a"]=new p}).call(this,n("b639").Buffer)},3504:function(e){e.exports=JSON.parse('{"main-menu":"主菜单","file-mgr":"文件管理","help":"帮助","svr-addr":"服务地址","please-cnn":"请连入","same-innet":"同一内网","browse":"，用浏览器上传/查看文件","upload-prompt":"提示：手机接上充电器后可当服务器用；否则过一段时间可能会自动休眠，导致文件服务器不可访问。","upload-try":"或尝试把应用加入电源管理白名单","whitelist":"加入白名单","wifi-disconnected":"wifi未连接，请连入内网后重试！","all":"全部","image":"图片","audio":"音频","video":"视频","sort-by-time":"按时间排序","sort-by-name":"按名称排序","sort-by-type":"按类型排序","multi-sel":"多选","already-exist":"项目已存在","no-selection":"没有选择文件","create-folder":"创建文件夹","success":"成功","fail":"失败","new-folder-name":"新文件夹名称","new-folder":"新建文件夹","can-not-be-empty":"不能为空","current-playback":"当前播放","none":"无","drag-it-move":"点此可拖动","tip":"提示：","play-tip":"可播放H264+AAC视频，如不支持，请先转码！","ok":"确定","cancel":"取消","delete":"删除","move":"移动","confirm-del":"确认删除所选","sequence":"顺序播放","sequence-tip":"按顺序播放完当前目录下所有音乐后停止","repeat-dir":"目录循环","repeat-dir-tip":"播放完当前目录下所有音乐后重新目录循环","single":"单曲播放","repeat-one":"单曲循环","open-file":"打开文件","rename-file":"重命名","new-file-name":"新文件名","same-file":"同名文件","upload-file":"上传文件","browse-file":"浏览文件","copy-url":"拷贝url","copy-url-done":"已拷贝文件地址到剪切板","scan":"扫码","copy-done":"已拷贝内容到剪切板","copy":"拷贝","close":"关闭","read-code-content":"读取内容","back":"返回","change-port":"改端口号","new-port":"新端口号","invalid-format":"格式不正确","invalid-ports":"监听端口需大于1024，小于65535","chg-port-success":"更改服务端口成功","chg-port-failed":"更改服务端口失败, 端口已被占用","outer":"外网","peer":"玩家","my":"我的","how-to-setup-ss":"怎样设置外网服务器","how-to-setup-ss-content":"如果没配外网服务器地址，会自动插入测试服地址，您可禁用或改为自己的地址。可设置多台服务器，同时与各台服务器上的玩家进行交互。搭建服务器请参考：","add":"新增","settings":"设置","friends":"好友","blacklist":"黑名单","nickname":"昵称","avatar":"头像","signature":"个性签名","def_nickname":"路人甲","def_signature":"无名小草","video-chat":"视频聊天","audio-chat":"语音聊天","allow":"允许","disallow":"禁止","chg-img":"替换图片","confirm-disable":"确认禁用","confirm-enable":"确认启用","add-friend":"加为好友","block-it":"屏蔽此人","connected":"附近玩家","nearby":"附近频道","world":"世界频道","peer-closed":"对方已离线","proxy":"代理信息","home-addr":"个人网站","upload-home":"上传网站","check-pass":"验证密码"}')},4678:function(e,t,n){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="4678"},"49f8":function(e,t,n){var i={"./en.json":"edd4","./zh.json":"3504"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="49f8"},"4bfd":function(e,t,n){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("a026"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("header",[e._v(e._s(e.title)+e._s(e.sub_title)+" ")]),n("nav",{staticClass:"menu",attrs:{id:"main-menu"}},[n("div",{staticClass:"menu-toggle",on:{click:e.toggle_menu}},[e._v(e._s(e.$t("main-menu")))]),n("div",{staticClass:"menu-dropdown"},[n("ul",{staticClass:"nav-menu"},[n("li",[n("a",{staticClass:"mb",on:{click:function(t){e.to_page("/outer",e.$t("outer"),t)}}},[n("i",{staticClass:"material-icons"},[e._v("language")]),e._v(" "+e._s(e.$t("outer"))+" ")])]),n("li",[n("a",{staticClass:"mb",on:{click:function(t){e.to_page("/help",e.$t("help"),t)}}},[n("i",{staticClass:"material-icons"},[e._v("help_outline")]),e._v(" "+e._s(e.$t("help"))+" ")])])])])]),n("div",{staticClass:"content"},[n("keep-alive",[n("router-view")],1)],1),n("footer",[n("div",{staticClass:"mb selected",on:{click:function(t){e.to_page("/",e.$t("file-mgr"),t)}}},[n("i",{staticClass:"material-icons"},[e._v("store")]),e._v(" "+e._s(e.$t("file-mgr"))+" ")]),n("div",{staticClass:"upload",on:{click:function(t){e.to_page("/upload",e.$t("upload-file"),t)}}},[e._v(e._s(e.$t("upload-file")))]),n("div",{staticClass:"uphome",on:{click:function(t){e.to_page("/uphome",e.$t("upload-home"),t)}}},[e._v(e._s(e.$t("upload-home")))])])])},r=[],u=i("1da1"),s=(i("4c53"),i("5319"),i("ac1f"),i("96cf"),i("d4ec")),c=i("bee2"),l=(i("159b"),i("c1df"),i("2ef0")),d=i.n(l),f=i("325c");window.sss={},window.socks_pid="",window.target_home_pid="";var p=function(){function e(){Object(s["a"])(this,e),d.a.bindAll(this,["init","reg_evt"]),this.need_check_friends=new Date}return Object(c["a"])(e,[{key:"init",value:function(){this.reg_evt(),this.go_pub()}},{key:"go_pub",value:function(){try{var e=f["a"].ss_addrs();e.forEach((function(e){e.enabled}))}catch(t){console.log("go_pub() exception")}}},{key:"reg_evt",value:function(){vm.$on("start_socks_server_succeed",(function(e){window.remote_proxy_port=parseInt(e.port)+100,console.log("window.remote_proxy_port=".concat(window.remote_proxy_port))})),vm.$on("add_ss",(function(e){var t=e.addr;sss.hasOwnProperty(t)||(sss[t]=new WSS(t),vm.$emit("ss_changed",{cmd:"add_ss",addr:t}))})),vm.$on("del_ss",(function(e){var t=e.addr;sss.hasOwnProperty(t)&&(sss[t].destroy(),delete sss[t],vm.$emit("ss_changed",{cmd:"del_ss",addr:t}))}))}}]),e}(),m=new p,h=function(){function e(){Object(s["a"])(this,e)}return Object(c["a"])(e,[{key:"init",value:function(){this.connected=null,this.ws=new WebSocket(this.ws_uri()),d.a.bindAll(this,["on_message","on_close","on_error","on_open","send"]),this.ws.onmessage=this.on_message,this.ws.onclose=this.on_close,this.ws.onerror=this.on_error,this.ws.onopen=this.on_open}},{key:"on_message",value:function(e){try{var t=JSON.parse(e.data);vm.$emit(t.cmd,t)}catch(n){console.log(e.data)}}},{key:"on_error",value:function(e){console.log("onerror: "+JSON.stringify(e,["message","arguments","type","name"]))}},{key:"on_close",value:function(){clearInterval(this.connected),this.init(),console.log("onclose")}},{key:"on_open",value:function(){var e=this;this.connected=setInterval((function(){e.ws.readyState==e.ws.OPEN&&e.ws.send("")}),2e4),console.log("onopen"),vm.$emit("ws_open","")}},{key:"send",value:function(e){if(!this.connected)return setTimeout(this.send,1e3,e);this.ws.send(e)}},{key:"ws_uri",value:function(){var e,t=window.location,n=t.host;return"https:"===t.protocol?e="wss:":"http:"===t.protocol?e="ws:":(e="ws:",n="localhost:".concat(f["a"].http_port())),e+="//"+n+"/cpp_channel",console.log(e),e}}]),e}(),v=h,D=i("ca34"),b=i.n(D),C=(b()(),{name:"App",created:function(){window.vm=this.$root,this.$root.$on("sub_title_chg",this.sub_title_chg)},beforeDestroy:function(){},destroyed:function(){this.$root.$off("sub_title_chg",this.sub_title_chg)},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.start_app();case 1:case"end":return t.stop()}}),t)})))()},data:function(){return{title:this.$t("file-mgr"),sub:""}},computed:{sub_title:function(){return this.sub?"(".concat(this.sub,")"):""}},methods:{toggle_menu:function(){var e=document.getElementById("main-menu");e.classList.toggle("is-open")},sub_title_chg:function(e){this.sub=e},to_page:function(e,t,n){this.$router.replace(e,(function(){})),this.title=t,$(".mb").removeClass("selected"),$(n.target).addClass("selected"),this.sub="",$("#main-menu").removeClass("is-open")},start_app:function(){m.init(),window.ws=new v,ws.init()}}}),y=C,w=(i("034f"),i("2877")),F=Object(w["a"])(y,o,r,!1,null,null,null),A=F.exports,k=(i("d3b7"),i("3ca3"),i("ddb0"),i("8c4f")),E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"store"},[n("div",{staticClass:"cur"},[n("div",[e._v(e._s(e.cur_dir))]),n("button",{staticClass:"green return",attrs:{disabled:e.dir.length<=0},on:{click:e.go_back}},[n("i",{staticClass:"material-icons"},[e._v("keyboard_backspace")])]),n("button",{staticClass:"yellow new-folder",on:{click:e.create_folder}},[n("i",{staticClass:"material-icons"},[e._v("create_new_folder")])])]),n("div",{staticClass:"main"},[n("keep-alive",[n("router-view")],1)],1),n("div",{staticClass:"fs-menu",on:{click:function(t){return t.stopPropagation(),e.hide_menu(t)}}},[n("i",{staticClass:"handle small material-icons"},[e._v("menu")]),n("div",{staticClass:"fs-dropdown"},[n("div",{staticClass:"all disabled",on:{click:function(t){e.switch_page(e.$t("all"),"all")}}},[n("i",{staticClass:"material-icons"},[e._v("store")]),e._v(e._s(e.$t("all")))]),n("div",{staticClass:"image",on:{click:function(t){e.switch_page(e.$t("image"),"image")}}},[n("i",{staticClass:"material-icons"},[e._v("image")]),e._v(e._s(e.$t("image")))]),n("div",{staticClass:"audio",on:{click:function(t){e.switch_page(e.$t("audio"),"audio")}}},[n("i",{staticClass:"material-icons"},[e._v("audiotrack")]),e._v(e._s(e.$t("audio")))]),n("div",{staticClass:"video",on:{click:function(t){e.switch_page(e.$t("video"),"video")}}},[n("i",{staticClass:"material-icons"},[e._v("ondemand_video")]),e._v(e._s(e.$t("video")))])]),n("div",{staticClass:"sort-dropdown"},[n("div",{on:{click:function(t){return e.set_sort_criteria(1)}}},[e._v(" "+e._s(e.$t("sort-by-time"))+" "),"asc"==e.order_by_time?n("i",{staticClass:"material-icons"},[e._v("arrow_upward")]):"desc"==e.order_by_time?n("i",{staticClass:"material-icons"},[e._v("arrow_downward")]):n("i",{staticClass:"material-icons"},[e._v("swap_vert")])]),n("div",{on:{click:function(t){return e.set_sort_criteria(2)}}},[e._v(" "+e._s(e.$t("sort-by-name"))+" "),"asc"==e.order_by_name?n("i",{staticClass:"material-icons"},[e._v("arrow_upward")]):"desc"==e.order_by_name?n("i",{staticClass:"material-icons"},[e._v("arrow_downward")]):n("i",{staticClass:"material-icons"},[e._v("swap_vert")])]),n("div",{on:{click:function(t){return e.set_sort_criteria(3)}}},[e._v(" "+e._s(e.$t("sort-by-type"))+" "),"asc"==e.order_by_type?n("i",{staticClass:"material-icons"},[e._v("arrow_upward")]):"desc"==e.order_by_type?n("i",{staticClass:"material-icons"},[e._v("arrow_downward")]):n("i",{staticClass:"material-icons"},[e._v("swap_vert")])]),n("div",{staticClass:"multi-sel",on:{click:function(t){e.switch_page(e.$t("multi-sel"),"multi-sel")}}},[e._v(" "+e._s(e.$t("multi-sel"))+" "),n("i",{staticClass:"material-icons"},[e._v("select_all")])])])])])},j=[],B=i("b85c");i("b0c0"),i("a15b"),i("c740"),i("4de4"),i("99af");window.g={files:[]};var x={name:"store",created:function(){this.$root.$on("get_file_list",this.on_files_chg),this.$root.$on("enter_dir",this.on_enter_dir),this.$root.$on("create_dir",this.on_create_dir),this.$root.$on("refresh_file_list",this.on_refresh),this.$root.$on("move_to",this.move_to),this.$root.$on("back",this.back),this.$root.$on("confirm_move",this.confirm_move)},destroyed:function(){this.$root.$off("get_file_list",this.on_files_chg),this.$root.$off("enter_dir",this.on_enter_dir),this.$root.$off("create_dir",this.on_create_dir),this.$root.$off("refresh_file_list",this.on_refresh),this.$root.$off("move_to",this.move_to),this.$root.$off("back",this.back),this.$root.$off("confirm_move",this.confirm_move)},watch:{$route:function(e,t){$(".fs-menu > div > div").removeClass("disabled"),$(".fs-dropdown > .".concat(e.name)).addClass("disabled")}},mounted:function(){var e=this;this.draggie=new Draggabilly(".fs-menu",{containment:".content",handle:".handle"}),this.draggie.on("dragStart",(function(){})),this.draggie.on("staticClick",(function(){$(".fs-menu").toggleClass("is-open")}));var t=db.ui.findOne({});this.set_sort_criteria(t.sort_type,t.sort_asc,!1),this.tm=setTimeout((function(){e.on_refresh()}),2500)},data:function(){return{refreshing:!1,sort_type:1,order_by_time:"",order_by_name:"",order_by_type:"",pending_f:[],original_page:"all",dir:[],original_dir:[]}},computed:{cur_dir:function(){var e=this.dir.join("/");return e?"".concat(e,"/"):""}},methods:{switch_page:function(e,t){this.$root.$emit("sub_title_chg",e),this.$router.replace({name:t})},set_sort_criteria:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case 1:n?("asc"==this.order_by_time?this.order_by_time="desc":(this.order_by_time,this.order_by_time="asc"),t=this.order_by_time):this.order_by_time=t;break;case 2:n?("asc"==this.order_by_name?this.order_by_name="desc":this.order_by_name="asc",t=this.order_by_name):this.order_by_name=t;break;case 3:n?("asc"==this.order_by_type?this.order_by_type="desc":this.order_by_type="asc",t=this.order_by_type):this.order_by_type=t;break}this.sort_type=e,db.ui.findAndUpdate({},(function(n){n.sort_type=e,n.sort_asc=t})),this.update_file_list()},sort:function(){switch(this.sort_type){case 1:g.files=d.a.orderBy(g.files,["time"]),"asc"!=this.order_by_time&&d.a.reverse(g.files);break;case 2:g.files=d.a.orderBy(g.files,["name"]),"asc"!=this.order_by_name&&d.a.reverse(g.files);break;case 3:g.files=d.a.orderBy(g.files,["type"]),"asc"!=this.order_by_type&&d.a.reverse(g.files);break}},back:function(){this.original_page="all",this.restore_before_move()},confirm_move:function(){var e=this,t=d.a.findIndex(g.files,(function(t){return t.type==e.pending_f[0].type&&t.name==e.pending_f[0].name}));if(t>=0)return f["a"].show_alert_top_tm(this.$t("already-exist"));var n,i=Object(B["a"])(this.pending_f);try{for(i.s();!(n=i.n()).done;){var a=n.value,o={cmd:"rename_file",path:a.path,new_name:this.cur_dir+a.name};ws.send(JSON.stringify(o))}}catch(r){i.e(r)}finally{i.f()}this.restore_before_move()},restore_before_move:function(){this.dir=this.original_dir,this.switch_page(this.$t(this.original_page),this.original_page),this.on_refresh()},move_to:function(e){var t=this;this.pending_f=[],this.original_dir=d.a.cloneDeep(this.dir);var n=this.$router.currentRoute;if(this.original_page=n.name,e)this.$router.replace("folder",(function(){t.pending_f.push(e)}));else{var i=d.a.filter(g.files,(function(e){return e.sel}));0==i.length?f["a"].show_alert_top_tm(this.$t("no-selection")):this.$router.replace("folder",(function(){t.pending_f=i}))}},hide_menu:function(){},test:function(e){alert(cli_id)},on_create_dir:function(e){if(0==e.ret){var t=f["a"].get_name_from_path(e.path);f["a"].show_info_center_tm("".concat(this.$t("create-folder"),"【").concat(t,"】").concat(this.$t("success")))}else f["a"].show_error_top("".concat(this.$t("create-folder")).concat(this.$t("fail"),": ").concat(e.msg))},create_folder:function(){var e=prompt(this.$t("new-folder-name"),this.$t("new-folder"));if(e){if(e=e.replace(/[\n\r]/gm,""),!e)return f["a"].show_alert_top_tm("".concat(this.$t("new-folder-name")).concat(this.$t("can-not-be-empty")));var t=d.a.findIndex(g.files,(function(t){return"dir"==t.type&&t.name==e}));if(t>=0)return f["a"].show_alert_top_tm(this.$t("already-exist"));if(e){var n={cmd:"create_dir",path:"".concat(this.cur_dir).concat(e)};ws.send(JSON.stringify(n))}}},go_back:function(){this.dir.pop(),this.on_refresh()},on_enter_dir:function(e){this.refreshing||(this.dir.push(e),this.on_refresh())},update_file_list:function(e){null!=e&&(g.files=e||[]),this.sort(),this.$root.$emit("update_file_list",g.files)},on_files_chg:function(e){clearTimeout(this.tm),this.update_file_list(e.files)},on_refresh:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("on_refresh ".concat(e.cur_dir)),e.refreshing=!0,t.prev=2,t.next=5,f["a"].post_local("get_files",{path:e.cur_dir});case 5:n=t.sent,e.update_file_list(n.files),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log("refresh ".concat(e.cur_dir," failed: ").concat(JSON.stringify(t.t0))),e.dir.pop();case 13:e.refreshing=!1;case 14:case"end":return t.stop()}}),t,null,[[2,9]])})))()}}},O=x,z=(i("7c93"),Object(w["a"])(O,E,j,!1,null,"2bcd0913",null)),S=z.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"All",on:{click:function(t){return t.preventDefault(),e.close_menu(t)}}},[e._l(e.files,(function(t){return n("div",{staticClass:"fi",on:{click:function(n){return e.open_file_or_folder(t)}}},["dir"==t.type?n("div",[n("i",{staticClass:"small yellow material-icons"},[e._v("folder")])]):t.type.includes("image/")?n("div",[n("i",{staticClass:"small material-icons"},[e._v("image")])]):t.type.includes("audio/")?n("div",[n("i",{staticClass:"small material-icons"},[e._v("audiotrack")])]):t.type.includes("video/")?n("div",[n("i",{staticClass:"small material-icons"},[e._v("ondemand_video")])]):n("div",[n("i",{staticClass:"small material-icons"},[e._v("insert_drive_file")])]),n("div",{staticClass:"file-desc"},[n("div",{staticClass:"fn"},[e._v(e._s(t.name))]),n("div",{staticClass:"file-time"},[n("div",[e._v(e._s(t.time))]),"dir"!=t.type?n("div",{staticClass:"file-size"},[e._v(e._s(e.formatFileSize(t.size)))]):e._e()]),"dir"!=t.type&&t.shown?n("div",[t.type.includes("image/")?n("img",{attrs:{src:e.file_url(t.path)}}):t.type.includes("audio/")?n("audio",{attrs:{src:e.file_url(t.path),controls:""},on:{click:function(e){e.stopPropagation()}}}):t.type.includes("video/")?n("video",{attrs:{src:e.file_url(t.path),controls:"controls"},on:{click:function(e){e.stopPropagation()}}}):n("a",{attrs:{href:e.file_url(t.path),target:"_blank"},on:{click:function(e){e.stopPropagation()}}},[e._v(e._s(e.$t("open-file")))])]):e._e()]),n("div",{staticClass:"op-menu",on:{click:function(t){return t.stopPropagation(),e.toggle_menu(t)}}},[n("div",{staticClass:"op-btn"},[e._v("⋮")]),n("div",{staticClass:"op-dropdown"},[n("div",{staticClass:"row"},[n("div",{on:{click:function(n){return e.del_file(t)}}},[e._v(e._s(e.$t("delete")))]),n("div",{on:{click:function(n){return e.rename_file(t)}}},[e._v(e._s(e.$t("rename-file")))]),n("div",{on:{click:function(n){return e.move_to(t)}}},[e._v(e._s(e.$t("move")))])]),n("div",{staticClass:"row"},["dir"!=t.type?n("div",[n("a",{attrs:{href:e.wifi_url(t),download:t.name}},[e._v(" 下载 ")])]):e._e(),e.is_zip_file(t)?n("div",{on:{click:function(n){return e.uncompress(t)}}},[e._v(" 解压 ")]):e._e(),e.is_srt_file(t)?n("div",{on:{click:function(n){return e.to_vtt(t)}}},[e._v(" 转vtt ")]):e._e()])])])])})),n("div",{staticClass:"pad-bottom"})],2)},N=[],M=(i("caad"),i("2532"),i("a434"),{name:"All",created:function(){this.$root.$on("del_file",this.on_del_file),this.$root.$on("rename_file",this.on_rename_file),this.$root.$on("update_file_list",this.update_file_list)},destroyed:function(){this.$root.$off("del_file",this.on_del_file),this.$root.$off("rename_file",this.on_rename_file),this.$root.$off("update_file_list",this.update_file_list)},mounted:function(){this.files=g.files},data:function(){return{files:[],wifi_ip:""}},computed:{store_url:function(){}},methods:{to_vtt:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].post_local("ffmpeg",{code:1,srt:e.path},1);case 3:n=t.sent,0==n.ret?f["a"].show_alert_top_tm("[".concat(e.name,"]转vtt成功")):f["a"].show_alert_top_tm("[".concat(e.name,"]转vtt失败")),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("".concat(e.name,"转vtt failed: ").concat(JSON.stringify(t.t0))),f["a"].show_error_top("[".concat(e.name,"]转vtt失败"));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},is_srt_file:function(e){return".srt"===e.name.substr(e.name.length-4)},is_zip_file:function(e){return e.type.includes("/zip")||e.type.includes("/x-7z")||e.type.includes("/x-rar")},uncompress:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f["a"].post_local("uncompress",{file:e.path},1);case 3:i=n.sent,0==i.ret?f["a"].show_alert_top_tm("解压文件[".concat(e.name,"]成功")):f["a"].show_alert_top_tm("解压文件[".concat(e.name,"]失败")),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log("uncompress ".concat(t.cur_dir," failed: ").concat(JSON.stringify(n.t0))),f["a"].show_error_top("解压文件[".concat(e.name,"]失败"));case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()},open_file_or_folder:function(e){if("dir"==e.type)this.$root.$emit("enter_dir",e.name);else{e.shown=!e.shown;var t=this.files.indexOf(e);this.files.splice(t,1,e)}},update_file_list:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.files=e;case 1:case"end":return n.stop()}}),n)})))()},wifi_url:function(e){var t="http://".concat(window.location.host,"/store/").concat(e.path);return t},move_to:function(e){this.$root.$emit("move_to",e)},close_menu:function(){$(".op-menu").removeClass("is-open")},toggle_menu:function(e){var t=e.currentTarget.classList.contains("is-open");this.close_menu(),!t&&e.currentTarget.classList.toggle("is-open")},on_del_file:function(e){if(0==e.ret){var t=f["a"].get_name_from_path(e.path);f["a"].show_info_center_tm("".concat(this.$t("delete"),"【").concat(t,"】").concat(this.$t("success")))}else f["a"].show_error_top("".concat(this.$t("delete")).concat(this.$t("fail"),": ").concat(e.msg))},on_rename_file:function(e){if(0==e.ret){var t=f["a"].get_name_from_path(e.path);f["a"].show_info_center_tm("".concat(this.$t("move"),"/").concat(this.$t("rename-file"),"【").concat(t,"】").concat(this.$t("success")))}else f["a"].show_error_top("".concat(this.$t("move"),"/").concat(this.$t("rename-file"),"【").concat(n,"】").concat(this.$t("fail"),"：").concat(e.msg))},rename_file:function(e){var t=prompt(this.$t("new-file-name"),e.name);t&&(t=t.replace(/[\n\r]/gm,""));var n=_.findIndex(g.files,(function(n){return n.type==e.type&&n.name==t}));if(n>=0)return f["a"].show_alert_top_tm("".concat(this.$t("same-file")).concat(this.$t("already-exist")));if(t&&t!=e.name){t=f["a"].get_dir_from_path(e.path)+t;var i={cmd:"rename_file",path:e.path,new_name:t};ws.send(JSON.stringify(i))}},del_file:function(e){var t=confirm("".concat(this.$t("confirm-del"),"[").concat(e.name,"]？"));if(t){var n={cmd:"del_file",path:e.path};ws.send(JSON.stringify(n))}},file_url:function(e){return"".concat(f["a"].store_url(),"/").concat(e)},formatFileSize:function(e,t){return f["a"].formatFileSize(e,t)}}}),T=M,R=(i("596d"),Object(w["a"])(T,P,N,!1,null,"89b36a98",null)),q=R.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"folder"},[n("div",{staticClass:"op-btn"},[n("button",{on:{click:e.back}},[e._v(e._s(e.$t("back")))]),n("button",{on:{click:e.confirm_move}},[e._v(e._s(e.$t("move")))])]),n("div",{staticClass:"op-btn-dummy"}),e._l(e.files,(function(t){return n("div",{staticClass:"fi",on:{click:function(n){return e.open_folder(t)}}},[e._m(0,!0),n("div",{staticClass:"file-desc"},[n("div",[e._v(e._s(t.name))]),n("div",{staticClass:"file-time"},[n("div",[e._v(e._s(t.time))])])])])})),n("div",{staticClass:"pad-bottom"})],2)},U=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("i",{staticClass:"small material-icons"},[e._v("folder")])])}],J={name:"folder",created:function(){this.$root.$on("update_file_list",this.update_file_list)},destroyed:function(){this.$root.$off("update_file_list",this.update_file_list)},mounted:function(){this.files=this.filter_folder(g.files)},data:function(){return{files:[]}},computed:{store_url:function(){return""}},methods:{back:function(){this.$root.$emit("back","")},confirm_move:function(){this.$root.$emit("confirm_move","")},filter_folder:function(e){return d.a.filter(e,(function(e){return"dir"==e.type}))},open_folder:function(e){this.$root.$emit("enter_dir",e.name)},update_file_list:function(e){this.files=this.filter_folder(e)}}},L=J,H=(i("24b4"),Object(w["a"])(L,I,U,!1,null,"11fd6a4e",null)),Y=H.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image"},[e._l(e.files,(function(t){return n("div",{staticClass:"fi"},[n("div",{staticClass:"file-desc"},[n("div",[e._v(e._s(t.name))]),n("div",{staticClass:"file-time"},[n("div",[e._v(e._s(t.time))]),n("div",[e._v(e._s(e.formatFileSize(t.size)))])]),n("img",{attrs:{src:e.file_url(t.path)},on:{click:e.toggle_size}})])])})),n("div",{staticClass:"pad-bottom"})],2)},G=[],K={name:"image",created:function(){this.$root.$on("update_file_list",this.update_file_list)},destroyed:function(){this.$root.$off("update_file_list",this.update_file_list)},mounted:function(){this.files=this.filter_img(g.files)},data:function(){return{files:[]}},computed:{store_url:function(){return""}},methods:{file_url:function(e){return f["a"].path2url(e)},formatFileSize:function(e,t){return f["a"].formatFileSize(e,t)},filter_img:function(e){return d.a.filter(e,(function(e){return e.type&&e.type.includes("image/")}))},toggle_size:function(e){$(e.target).toggleClass("ori-size")},update_file_list:function(e){this.files=this.filter_img(e)}}},W=K,V=(i("d920"),Object(w["a"])(W,Z,G,!1,null,"5cbe092f",null)),Q=V.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"audio"},[e._l(e.files,(function(t){return n("div",{staticClass:"fi",attrs:{id:e.hash(t.name)},on:{click:function(n){return e.play_audio(t,n)}}},[n("div",{staticClass:"file-desc"},[n("div",[e._v(e._s(t.name))]),n("div",{staticClass:"file-time"},[n("div",[e._v(e._s(t.time))]),n("div",[e._v(e._s(e.formatFileSize(t.size)))]),n("div",[e._v(e._s(t.duration))])])])])})),n("div",{staticClass:"pad-bottom"}),n("div",{staticClass:"audio-player"},[n("div",{staticClass:"drag-header"},[n("div",{staticClass:"prompt"},[n("div",[e._v(e._s(e.$t("current-playback"))+": "+e._s(e.cur_audio?e.cur_audio.name:e.$t("none"))+" ")]),n("div",[n("b",[e._v(e._s(e.$t("drag-it-move")))])])]),e._v(" "+e._s(e.$t("sequence"))+": "+e._s(e.$t("sequence-tip"))),n("br"),e._v(" "+e._s(e.$t("repeat-dir"))+": "+e._s(e.$t("repeat-dir-tip"))),n("br")]),n("div",[e.cur_audio?n("audio",{attrs:{id:"audio-player",src:e.cur_url,controls:"",autoplay:""},on:{ended:function(t){return e.on_end()}}}):e._e(),e.cur_audio?n("div",{staticClass:"play-type"},[n("div",{on:{click:function(t){return t.stopPropagation(),e.set_loop_type(1)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.play_type,expression:"play_type"}],attrs:{type:"radio",value:"1"},domProps:{checked:e._q(e.play_type,"1")},on:{change:function(t){e.play_type="1"}}}),n("label",{attrs:{for:"1"}},[e._v(e._s(e.$t("single")))])]),n("div",{on:{click:function(t){return t.stopPropagation(),e.set_loop_type(2)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.play_type,expression:"play_type"}],attrs:{type:"radio",value:"2"},domProps:{checked:e._q(e.play_type,"2")},on:{change:function(t){e.play_type="2"}}}),n("label",{attrs:{for:"2"}},[e._v(e._s(e.$t("repeat-one")))])]),n("div",{on:{click:function(t){return t.stopPropagation(),e.set_loop_type(3)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.play_type,expression:"play_type"}],attrs:{type:"radio",value:"3"},domProps:{checked:e._q(e.play_type,"3")},on:{change:function(t){e.play_type="3"}}}),n("label",{attrs:{for:"3"}},[e._v(e._s(e.$t("sequence")))])]),n("div",{on:{click:function(t){return t.stopPropagation(),e.set_loop_type(4)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.play_type,expression:"play_type"}],attrs:{type:"radio",value:"4"},domProps:{checked:e._q(e.play_type,"4")},on:{change:function(t){e.play_type="4"}}}),n("label",{attrs:{for:"4"}},[e._v(e._s(e.$t("repeat-dir")))])])]):e._e()])])],2)},ee=[],te={name:"audio",created:function(){this.$root.$on("update_file_list",this.update_file_list)},destroyed:function(){this.$root.$off("update_file_list",this.update_file_list)},mounted:function(){this.files=this.filter_audio(g.files),this.draggie=new Draggabilly(".audio-player",{containment:".audio",handle:".drag-header"});var e=db.ui.findOne({});this.play_type=e.audio_loop_type},data:function(){return{play_type:1,cur_audio:null,files:[]}},computed:{cur_url:function(){return this.cur_audio?f["a"].path2url(this.cur_audio.path):null}},methods:{set_loop_type:function(e){this.play_type=e,db.ui.findAndUpdate({},(function(t){t.audio_loop_type=e}))},hash:function(e){return f["a"].md5(e)},on_end:function(){switch(parseInt(this.play_type)){case 1:break;case 2:$("audio")[0].play();break;case 3:var e=this.files.indexOf(this.cur_audio);if(e>=0&&e<this.files.length-1){this.cur_audio=this.files[e+1];var t=this.hash(this.cur_audio.name);$(".fi").removeClass("selected"),$("#".concat(t)).addClass("selected")}break;case 4:var n=this.files.indexOf(this.cur_audio);if(n>=0){n<this.files.length-1?this.cur_audio=this.files[n+1]:this.cur_audio=this.files[0];var i=this.hash(this.cur_audio.name);$(".fi").removeClass("selected"),$("#".concat(i)).addClass("selected")}break}},formatFileSize:function(e,t){return f["a"].formatFileSize(e,t)},filter_audio:function(e){var t=this,n=d.a.filter(e,(function(e){if(e.type&&e.type.includes("audio/")){var n=new Audio;return $(n).on("loadedmetadata",(function(){e.duration=f["a"].toHHMMSS(n.duration),t.files.splice(t.files.indexOf(e),1,e)})),n.src=f["a"].path2url(e.path),!0}return!1}));return n},play_audio:function(e,t){this.cur_audio=e,$(".fi").removeClass("selected"),$(t.currentTarget).addClass("selected")},update_file_list:function(e){this.files=this.filter_audio(e)}}},ne=te,ie=(i("7927"),Object(w["a"])(ne,X,ee,!1,null,"5e6dcb31",null)),ae=ie.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video"},[e._l(e.files,(function(t){return n("div",{key:t.name,staticClass:"fi",on:{click:function(n){return e.play_video(t,n)}}},[n("div",{staticClass:"file-desc"},[n("div",[e._v(e._s(t.name))]),n("div",{staticClass:"file-time"},[n("div",[e._v(e._s(t.time))]),n("div",[e._v(e._s(e.formatFileSize(t.size)))]),n("div",[e._v(e._s(t.duration))]),n("div",{staticStyle:{cursor:"pointer"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.get_info(t,n)}}},[n("i",{staticClass:" material-icons"},[e._v("info")])])]),n("div",{staticClass:"media-info"},e._l(t.streams,(function(i,a){return n("div",{key:a},[i.progress&&"100.00%"!=i.progress?n("div",{staticClass:"progressbar"},[n("div",{style:{width:i.progress}}),n("div",{staticClass:"cap"},[e._v(e._s(i.progress+"["+i.speed+"]"))])]):e._e(),n("div",{staticClass:"stream"},[n("div",{staticClass:"info"},[e._v(e._s(i.info))]),e.video_need_convert(t,i)?n("button",{staticClass:"ff",on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.to_x264(t,i)}}},[e._v("转H264+MP3")]):"Audio"===i.type?n("button",{staticClass:"ff",on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.extract_mp3(t,i)}}},[e._v("提取mp3")]):"Subtitle"===i.type?n("button",{staticClass:"ff",on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.extract_vtt(t,i)}}},[e._v("提取vtt")]):e._e()])])})),0)])])})),n("div",{staticClass:"pad-bottom"}),n("div",{staticClass:"video-player",on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.window.$("#video-player").toggle()}}},[n("div",{staticClass:"drag-header"},[n("div",{staticClass:"prompt"},[n("div",[e._v(e._s(e.$t("current-playback"))+": "+e._s(e.cur_video?e.cur_video.name:e.$t("none"))+" ")]),n("div",[n("b",[e._v(e._s(e.$t("drag-it-move")))])])]),n("p",[e._v(e._s(""+e.$t("tip")+e.$t("play-tip")))])]),n("div",[e.cur_video?n("video",{attrs:{id:"video-player",src:e.cur_url,controls:"",autoplay:"",preload:"metadata"}},e._l(e.vtt_url,(function(e,t){return n("track",{key:t,attrs:{label:e.lang,kind:"subtitles",src:e.url,default:0==t}})})),0):e._e()])])],2)},re=[],ue=(i("d81d"),i("7db0"),i("1276"),i("498a"),i("466d"),{name:"video",created:function(){this.$root.$on("update_file_list",this.update_file_list),this.$root.$on("ffmpeg_progress",this.ffmpeg_progress)},destroyed:function(){this.$root.$off("update_file_list",this.update_file_list),this.$root.$off("ffmpeg_progress",this.ffmpeg_progress)},mounted:function(){this.files=this.filter_video(g.files),this.draggie=new Draggabilly(".video-player",{containment:".video",handle:".drag-header"})},data:function(){return{play_type:1,cur_video:null,files:[]}},computed:{cur_url:function(){return this.cur_video?f["a"].path2url(this.cur_video.path):null},vtt_url:function(){var e=this;if(this.cur_video){var t,n=this.cur_video.path;return t="_x264.mp4"===n.substr(n.length-9)?n.substr(0,n.length-9):n.substr(0,n.length-4),g.files.filter((function(e){return".vtt"==e.path.substr(e.path.length-4)&&e.path.includes(t)})).map((function(n){return{lang:e.get_lang_from_path(n.path,t),url:f["a"].path2url(n.path)}}))}}},methods:{ffmpeg_progress:function(e){var t,n=Object(B["a"])(this.files);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.path==e.video){var a,o=Object(B["a"])(i.streams);try{for(o.s();!(a=o.n()).done;){var r=a.value;if(r.sid==e.sid){r.progress=e.progress,r.speed=e.speed;break}}}catch(u){o.e(u)}finally{o.f()}this.files.splice(this.files.indexOf(i),1,i);break}}}catch(u){n.e(u)}finally{n.f()}},video_need_convert:function(e,t){if("Video"===t.type){var n=/yuv420p,/.test(t.info);return"h264"!=t.codec||!n||".mp4"!=e.name.substr(e.name.length-4)}return!1},extract_vtt:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f["a"].post_local("ffmpeg",{code:2,video:e.path,sid:t.sid,lang:t.lang},1);case 3:i=n.sent,i.ret,n.next=9;break;case 7:n.prev=7,n.t0=n["catch"](0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})))()},extract_mp3:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f["a"].post_local("ffmpeg",{code:3,video:e.path,sid:t.sid,lang:t.lang},1);case 3:i=n.sent,i.ret,n.next=9;break;case 7:n.prev=7,n.t0=n["catch"](0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})))()},to_x264:function(e,t){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].post_local("ffmpeg",{code:4,video:e.path},1);case 3:n=t.sent,n.ret,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},get_info:function(e,t){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){var a,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=$(t.currentTarget).closest(".file-desc").find(".media-info"),!e.streams){i.next=4;break}return a.toggle(),i.abrupt("return");case 4:return i.prev=4,i.next=7,f["a"].post_local("ffmpeg",{code:0,media:e.path},1);case 7:o=i.sent,0==o.ret&&(e.streams=o.streams.trim().split(/\n/).map((function(e){console.log(e);var t=e.match(/#(0:\d+)(?:\((\w+)\))?:\s(\w+):\s(\w+)/);return{info:e,sid:t[1],lang:t[2]||"und",type:t[3],codec:t[4]}})),n.files.splice(n.files.indexOf(e),1,e),a.show()),i.next=13;break;case 11:i.prev=11,i.t0=i["catch"](4);case 13:case"end":return i.stop()}}),i,null,[[4,11]])})))()},get_lang_from_path:function(e,t){var n=e.substr(t.length),i="und";return n=n.substr(0,n.length-4),n&&(n=f["a"].match_unicode(n),n&&(i=n[0])),i},formatFileSize:function(e,t){return f["a"].formatFileSize(e,t)},filter_video:function(e){var t=this,n=e.filter((function(e){if(e.type&&e.type.includes("video/")){var n=document.createElement("video");return $(n).on("loadedmetadata",(function(){e.duration=f["a"].toHHMMSS(n.duration),t.files.splice(t.files.indexOf(e),1,e)})),n.src=f["a"].path2url(e.path),!0}return!1}));return n},play_video:function(e,t){this.cur_video=e,$(".fi").removeClass("selected"),$(t.currentTarget).addClass("selected")},update_file_list:function(e){this.files=this.filter_video(e)}}}),se=ue,ce=(i("9f50"),Object(w["a"])(se,oe,re,!1,null,"41a57dcc",null)),le=ce.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"multi-sel"},[n("div",{staticClass:"op-btn"},[n("button",{on:{click:e.back}},[e._v(e._s(e.$t("back")))]),n("button",{attrs:{disabled:!e.is_selected},on:{click:e.del_file}},[e._v(e._s(e.$t("delete")))]),n("button",{attrs:{disabled:!e.is_selected},on:{click:e.move_to}},[e._v(e._s(e.$t("move")))])]),n("div",{staticClass:"op-btn-dummy"}),e._l(e.files,(function(t){return n("div",{staticClass:"fi"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sel,expression:"f.sel"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.sel)?e._i(t.sel,null)>-1:t.sel},on:{change:function(n){var i=t.sel,a=n.target,o=!!a.checked;if(Array.isArray(i)){var r=null,u=e._i(i,r);a.checked?u<0&&e.$set(t,"sel",i.concat([r])):u>-1&&e.$set(t,"sel",i.slice(0,u).concat(i.slice(u+1)))}else e.$set(t,"sel",o)}}}),n("div",{staticClass:"file-desc"},[n("div",{staticClass:"fn"},[e._v(e._s(t.name))]),n("div",{staticClass:"file-time"},[n("div",[e._v(e._s(t.time))]),"dir"!=t.type?n("div",{staticClass:"file-size"},[e._v(e._s(e.formatFileSize(t.size)))]):e._e()])]),"dir"==t.type?n("div",{on:{click:function(n){return e.open_file_or_folder(t)}}},[n("i",{staticClass:"small material-icons"},[e._v("folder")])]):t.type.includes("image/")?n("div",[n("i",{staticClass:"small material-icons"},[e._v("image")])]):t.type.includes("audio/")?n("div",[n("i",{staticClass:"small material-icons"},[e._v("audiotrack")])]):t.type.includes("video/")?n("div",[n("i",{staticClass:"small material-icons"},[e._v("ondemand_video")])]):n("div",[n("i",{staticClass:"small material-icons"},[e._v("insert_drive_file")])])])})),n("div",{staticClass:"pad-bottom"})],2)},fe=[],pe={name:"multi-sel",created:function(){this.$root.$on("update_file_list",this.update_file_list)},destroyed:function(){this.$root.$off("update_file_list",this.update_file_list)},mounted:function(){this.files=g.files},data:function(){return{files:[]}},computed:{selected_file_names:function(){var e=d.a.filter(this.files,(function(e){return e.sel}));return e=d.a.map(e,"name"),e.join(" + ")},is_selected:function(){var e=d.a.filter(this.files,(function(e){return e.sel}));return e.length>0}},methods:{back:function(){this.$root.$emit("back","")},open_file_or_folder:function(e){"dir"==e.type&&this.$root.$emit("enter_dir",e.name)},update_file_list:function(e){this.files=e},move_to:function(){this.$root.$emit("move_to","")},del_file:function(){var e=confirm("".concat(this.$t("confirm-del")).concat(this.selected_file_names));if(e){var t,n=Object(B["a"])(this.files);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.sel){var a={cmd:"del_file",path:i.path};ws.send(JSON.stringify(a))}}}catch(o){n.e(o)}finally{n.f()}}},file_url:function(e){return f["a"].path2url(e)},formatFileSize:function(e,t){return f["a"].formatFileSize(e,t)}}},_e=pe,me=(i("be4e"),Object(w["a"])(_e,de,fe,!1,null,"bc1d0bc6",null)),he=me.exports,ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload"},[e._l(e.uploading,(function(t,i){return n("div",{staticClass:"progressbar"},[n("div",{style:{width:t.progress}}),n("div",{staticClass:"cap"},[e._v(e._s(e.progress_cap(t)+"("+t.progress+")"))])])})),n("input",{attrs:{type:"file",multiple:""},on:{change:function(t){return e.processFile(t)}}}),0==e.up_count?n("div",[n("button",{staticClass:"upload_btn",on:{click:function(t){return t.preventDefault(),e.open_file()}}},[e._v(e._s(e.$t("upload-file")))]),n("div",{staticClass:"info-panel"},[e._v(" 上传的文件保存在程序的mystore目录下。 ")])]):e._e()],2)},De=[],ge=i("df91"),be=ge["a"],Ce=(i("6348"),Object(w["a"])(be,ve,De,!1,null,"748eab16",null)),ye=Ce.exports,we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"up-home"},[e.uploading?n("div",{staticClass:"progressbar"},[n("div",{style:{width:e.uploading.progress}}),n("div",{staticClass:"cap"},[e._v(e._s(e.progress_cap(e.uploading)+"("+e.uploading.progress+")"))])]):e._e(),n("input",{attrs:{type:"file"},on:{change:function(t){return e.processFile(t)}}}),e.uploading?e._e():n("div",{staticClass:"input-panel"},[e.pass_valid?e._e():n("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],attrs:{type:"password",placeholder:"数据库密码"},domProps:{value:e.pass},on:{keypress:function(t){return t.type.indexOf("key")||13===t.keyCode?e.check_and_upload():null},input:function(t){t.target.composing||(e.pass=t.target.value)}}}),n("button",{staticClass:"upload_btn",on:{click:function(t){return t.preventDefault(),e.check_and_upload()}}},[e._v(e._s(e.pass_valid?e.$t("upload-home"):e.$t("check-pass")))]),e.pass_valid?n("p",[e._v(" 请上传网站的压缩包（zip/rar/7z 格式），解压后应直接有index.html + app.js文件。"),n("br"),e._v(" 网站目录结构请参见《后台接口说明》 ")]):e._e(),n("a",{attrs:{href:e.api_url,target:"_blank"}},[e._v("后台接口说明")]),n("a",{attrs:{href:e.demo_url}},[e._v("nodejs demo代码")]),n("a",{attrs:{href:e.home_url}},[e._v("打开用户网站")])])])},Fe=[],Ae=i("8804"),ke=Ae["a"],Ee=(i("f106"),Object(w["a"])(ke,we,Fe,!1,null,"36c8e90a",null)),$e=Ee.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sss"},e._l(e.sss,(function(t,i){return n("div",{staticClass:"server"},[n("div",{staticClass:"bubble"},[e._v(e._s(t.total))]),n("div",{staticClass:"addr"},[e._v(e._s(i))])])})),0)},Be=[],xe={name:"Sss",props:{msg:String},created:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$root.$on("ss_changed",this.refresh),this.$root.$on("online_count",this.refresh);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){this.$root.$off("ss_changed",this.refresh),this.$root.$off("online_count",this.refresh)},mounted:function(){this.refresh()},data:function(){return{sss:[]}},computed:{address:function(){}},methods:{refresh:function(){this.sss=sss},remove:function(e){}}},Oe=xe,ze=(i("8693"),Object(w["a"])(Oe,je,Be,!1,null,"548069e9",null));ze.exports;a["a"].use(k["a"]);var Se=new k["a"]({routes:[{path:"/",name:"store",component:S,children:[{path:"",name:"all",component:q},{path:"folder",name:"folder",component:Y},{path:"image",name:"image",component:Q},{path:"audio",name:"audio",component:ae},{path:"video",name:"video",component:le},{path:"multi-sel",name:"multi-sel",component:he}]},{path:"/outer",name:"outer",component:function(){return i.e("chunk-42269c3e").then(i.bind(null,"f6d1"))}},{path:"/help",name:"help",component:function(){return i.e("help").then(i.bind(null,"c3ef"))}},{path:"/help-en",name:"help-en",component:function(){return i.e("help-en").then(i.bind(null,"6b23"))}},{path:"/upload",name:"upload",component:ye},{path:"/uphome",name:"uphome",component:$e},{path:"*",redirect:"/"}]}),Pe=i("a925");function Ne(){var e=i("49f8"),t={};return e.keys().forEach((function(n){var i=n.match(/([A-Za-z0-9-_]+)\./i);if(i&&i.length>1){var a=i[1];t[a]=e(n)}})),t}a["a"].use(Pe["a"]);var Me,Te=new Pe["a"]({locale:"en",fallbackLocale:"en",messages:Ne()}),Re=(i("641b"),i("ce88")),qe=i.n(Re),Ie=i("5d2d"),Ue=i.n(Ie),Je=i("a67c"),Le=i.n(Je),He=new Le.a;function Ye(){Me.ui.findOne({})||Me.ui.insert({sort_type:1,sort_asc:"asc",audio_loop_type:"1"}),Me.svr.findOne({})||Me.svr.insert({http_port:57e3,socks_port:58e3}),Me.ss.findOne({})||Me.ss.insert({addr:"139.155.50.166:57000",enabled:!1})}var Ze=new Promise((function(e,t){if(Me)e(Me);else var n=new Ue.a("pyStore.db",{adapter:He,autoload:!0,autoloadCallback:function(){Me={user:n.getCollection("user")?n.getCollection("user"):n.addCollection("user"),friends:n.getCollection("friends")?n.getCollection("friends"):n.addCollection("friends"),blacklist:n.getCollection("blacklist")?n.getCollection("blacklist"):n.addCollection("blacklist"),ui:n.getCollection("ui")?n.getCollection("ui"):n.addCollection("ui"),svr:n.getCollection("svr")?n.getCollection("svr"):n.addCollection("svr"),ss:n.getCollection("ss")?n.getCollection("ss"):n.addCollection("ss"),peer_chat_log:n.getCollection("peer_chat_log")?n.getCollection("peer_chat_log"):n.addCollection("peer_chat_log"),nearby_chat_log:n.getCollection("nearby_chat_log")?n.getCollection("nearby_chat_log"):n.addCollection("nearby_chat_log"),world_chat_log:n.getCollection("world_chat_log")?n.getCollection("world_chat_log"):n.addCollection("world_chat_log")},Ye(),e(Me)},autosave:!0,autosaveInterval:1e3})}));window.$=i("1157"),window.Draggabilly=qe.a,a["a"].config.productionTip=!1,a["a"].prototype.window=window,window.i18n=Te,console.log("navigator.language = ".concat(navigator.language)),"zh-CN"===navigator.language&&(Te.locale="zh"),Ze.then((function(e){window.db=e,new a["a"]({router:Se,i18n:Te,render:function(e){return e(A)}}).$mount("#app")}))},"596d":function(e,t,n){"use strict";n("a9f8")},6189:function(e,t,n){},6348:function(e,t,n){"use strict";n("84ec")},"641b":function(e,t,n){},"6ed0":function(e,t,n){},"748d":function(e,t,n){"use strict";n("99af");function i(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function a(e,t){return e<<t|e>>>32-t}function o(e,t,n,o,r,u){return i(a(i(i(t,e),i(o,u)),r),n)}function r(e,t,n,i,a,r,u){return o(t&n|~t&i,e,t,a,r,u)}function u(e,t,n,i,a,r,u){return o(t&i|n&~i,e,t,a,r,u)}function s(e,t,n,i,a,r,u){return o(t^n^i,e,t,a,r,u)}function c(e,t,n,i,a,r,u){return o(n^(t|~i),e,t,a,r,u)}function l(e,t){var n,a,o,l,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var f=1732584193,p=-271733879,_=-1732584194,m=271733878;for(n=0;n<e.length;n+=16)a=f,o=p,l=_,d=m,f=r(f,p,_,m,e[n],7,-680876936),m=r(m,f,p,_,e[n+1],12,-389564586),_=r(_,m,f,p,e[n+2],17,606105819),p=r(p,_,m,f,e[n+3],22,-1044525330),f=r(f,p,_,m,e[n+4],7,-176418897),m=r(m,f,p,_,e[n+5],12,1200080426),_=r(_,m,f,p,e[n+6],17,-1473231341),p=r(p,_,m,f,e[n+7],22,-45705983),f=r(f,p,_,m,e[n+8],7,1770035416),m=r(m,f,p,_,e[n+9],12,-1958414417),_=r(_,m,f,p,e[n+10],17,-42063),p=r(p,_,m,f,e[n+11],22,-1990404162),f=r(f,p,_,m,e[n+12],7,1804603682),m=r(m,f,p,_,e[n+13],12,-40341101),_=r(_,m,f,p,e[n+14],17,-1502002290),p=r(p,_,m,f,e[n+15],22,1236535329),f=u(f,p,_,m,e[n+1],5,-165796510),m=u(m,f,p,_,e[n+6],9,-1069501632),_=u(_,m,f,p,e[n+11],14,643717713),p=u(p,_,m,f,e[n],20,-373897302),f=u(f,p,_,m,e[n+5],5,-701558691),m=u(m,f,p,_,e[n+10],9,38016083),_=u(_,m,f,p,e[n+15],14,-660478335),p=u(p,_,m,f,e[n+4],20,-405537848),f=u(f,p,_,m,e[n+9],5,568446438),m=u(m,f,p,_,e[n+14],9,-1019803690),_=u(_,m,f,p,e[n+3],14,-187363961),p=u(p,_,m,f,e[n+8],20,1163531501),f=u(f,p,_,m,e[n+13],5,-1444681467),m=u(m,f,p,_,e[n+2],9,-51403784),_=u(_,m,f,p,e[n+7],14,1735328473),p=u(p,_,m,f,e[n+12],20,-1926607734),f=s(f,p,_,m,e[n+5],4,-378558),m=s(m,f,p,_,e[n+8],11,-2022574463),_=s(_,m,f,p,e[n+11],16,1839030562),p=s(p,_,m,f,e[n+14],23,-35309556),f=s(f,p,_,m,e[n+1],4,-1530992060),m=s(m,f,p,_,e[n+4],11,1272893353),_=s(_,m,f,p,e[n+7],16,-155497632),p=s(p,_,m,f,e[n+10],23,-1094730640),f=s(f,p,_,m,e[n+13],4,681279174),m=s(m,f,p,_,e[n],11,-358537222),_=s(_,m,f,p,e[n+3],16,-722521979),p=s(p,_,m,f,e[n+6],23,76029189),f=s(f,p,_,m,e[n+9],4,-640364487),m=s(m,f,p,_,e[n+12],11,-421815835),_=s(_,m,f,p,e[n+15],16,530742520),p=s(p,_,m,f,e[n+2],23,-995338651),f=c(f,p,_,m,e[n],6,-198630844),m=c(m,f,p,_,e[n+7],10,1126891415),_=c(_,m,f,p,e[n+14],15,-1416354905),p=c(p,_,m,f,e[n+5],21,-57434055),f=c(f,p,_,m,e[n+12],6,1700485571),m=c(m,f,p,_,e[n+3],10,-1894986606),_=c(_,m,f,p,e[n+10],15,-1051523),p=c(p,_,m,f,e[n+1],21,-2054922799),f=c(f,p,_,m,e[n+8],6,1873313359),m=c(m,f,p,_,e[n+15],10,-30611744),_=c(_,m,f,p,e[n+6],15,-1560198380),p=c(p,_,m,f,e[n+13],21,1309151649),f=c(f,p,_,m,e[n+4],6,-145523070),m=c(m,f,p,_,e[n+11],10,-1120210379),_=c(_,m,f,p,e[n+2],15,718787259),p=c(p,_,m,f,e[n+9],21,-343485551),f=i(f,a),p=i(p,o),_=i(_,l),m=i(m,d);return[f,p,_,m]}function d(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function f(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function p(e){return d(l(f(e),8*e.length))}function _(e,t){var n,i,a=f(e),o=[],r=[];for(o[15]=r[15]=void 0,a.length>16&&(a=l(a,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^a[n],r[n]=1549556828^a[n];return i=l(o.concat(f(t)),512+8*t.length),d(l(r.concat(i),640))}function m(e){var t,n,i="0123456789abcdef",a="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),a+=i.charAt(t>>>4&15)+i.charAt(15&t);return a}function h(e){return unescape(encodeURIComponent(e))}function v(e){return p(h(e))}function D(e){return m(v(e))}function g(e,t){return _(h(e),h(t))}function b(e,t){return m(g(e,t))}function C(e,t,n){return t?n?g(t,e):b(t,e):n?v(e):D(e)}t["a"]=C},7927:function(e,t,n){"use strict";n("ac19")},"7c93":function(e,t,n){"use strict";n("a8fd")},"84ec":function(e,t,n){},"85ec":function(e,t,n){},8693:function(e,t,n){"use strict";n("92e2")},8804:function(e,t,n){"use strict";(function(e){var i=n("1da1"),a=(n("99af"),n("b0c0"),n("fb6a"),n("b680"),n("466d"),n("ac1f"),n("96cf"),n("2ef0")),o=n.n(a),r=n("325c");t["a"]={name:"UpHome",props:{msg:String},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){},mounted:function(){},data:function(){return{invalid_tm:null,pass_valid:!1,pass:"",uploading:null}},computed:{home_url:function(){return"http://".concat(location.hostname,":").concat(parseInt(location.port)+1,"/")},pass_url:function(){return"http://".concat(location.hostname,":").concat(parseInt(location.port)+1,"/check_pass")},api_url:function(){return"http://".concat(location.hostname,":").concat(parseInt(location.port),"/api.txt")},demo_url:function(){return"http://".concat(location.hostname,":").concat(parseInt(location.port),"/app.js")}},methods:{progress_cap:function(e){return"".concat(o.a.truncate(e.name,{length:7})).concat(r["a"].formatFileSize(e.size))},check_pass:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.pass){t.next=2;break}return t.abrupt("return",r["a"].show_alert_top_tm("请输入数据库访问密码"));case 2:return t.prev=2,t.next=5,r["a"].post_json(e.pass_url,{pass:e.pass});case 5:n=t.sent,0==n.ret?(e.pass_valid=!0,clearTimeout(e.invalid_tm),e.invalid_tm=setTimeout((function(){e.pass_valid=!1}),12e4)):r["a"].show_error_top("无效的密码: ".concat(n.msg)),e.pass="",t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),r["a"].show_error_top("验证密码失败: ".concat(t.t0));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))()},check_and_upload:function(){this.pass_valid?$('input[type="file"]').click():this.check_pass()},upload_file:function(t){var n=this,i=0,a=1048576,o=t.size,r=0,u=new FileReader,s=t.slice(r,a);u.readAsBinaryString(s),u.onload=function(r){var c=0;i>0&&i+a<=o?c=1:i+a>o&&(c=2);var l=u.result;l=e.concat([e.from(t.name),e.from([0],"binary"),e.from(l,"binary"),e.from([c],"binary")]),$.ajax({type:"POST",url:"/upload_home",dataType:"text",contentType:"application/octet-stream",data:l,processData:!1}).done((function(e){i+=a,i<=o?(s=t.slice(i,i+a),u.readAsBinaryString(s)):(i=o,n.uploading=null),n.uploading&&(n.uploading.progress="".concat(parseFloat(i/o*100).toFixed(2),"%"))})).fail((function(e){console.log("failed: ",e)}))}},processFile:function(e){var t=/(zip)|(7z)|(rar)/;if(0!=e.target.files.length){var n=e.target.files[0];if(console.log("f.type=".concat(n.type)),!n.type.match(t))return r["a"].show_alert_top_tm("请选择[zip|7z|rar]压缩文件");this.uploading={progress:"0%",size:n.size,name:n.name},this.upload_file(n),$('input[type="file"]').val("")}}}}}).call(this,n("b639").Buffer)},"92e2":function(e,t,n){},"9f50":function(e,t,n){"use strict";n("bb31")},a8fd:function(e,t,n){},a9f8:function(e,t,n){},ac19:function(e,t,n){},bb31:function(e,t,n){},be4e:function(e,t,n){"use strict";n("6ed0")},d920:function(e,t,n){"use strict";n("6189")},df91:function(e,t,n){"use strict";(function(e){var i=n("1da1"),a=(n("99af"),n("b0c0"),n("fb6a"),n("b680"),n("96cf"),n("2ef0")),o=n.n(a),r=n("325c");t["a"]={name:"Upload",props:{msg:String},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){},mounted:function(){},data:function(){return{uploading:{},up_count:0}},computed:{address:function(){return""}},methods:{progress_cap:function(e){return"".concat(o.a.truncate(e.name,{length:7})).concat(r["a"].formatFileSize(e.size))},open_file:function(){$('input[type="file"]').click()},upload_file:function(t){var n=this,i=0,a=1048576,o=t.size,r=0,u=new FileReader,s=t.slice(r,a);u.readAsBinaryString(s),u.onload=function(r){var c=0;i>0&&i+a<=o?c=1:i+a>o&&(c=2);var l=u.result;l=e.concat([e.from(t.name),e.from([0],"binary"),e.from(l,"binary"),e.from([c],"binary")]),$.ajax({type:"POST",url:"/upload",dataType:"text",contentType:"application/octet-stream",data:l,processData:!1}).done((function(e){i+=a,i<=o?(s=t.slice(i,i+a),u.readAsBinaryString(s)):(i=o,0==--n.up_count&&(n.uploading={})),n.up_count>0&&(n.uploading[t.name].progress="".concat(parseFloat(i/o*100).toFixed(2),"%"))})).fail((function(e){console.log("failed: ",e)}))}},processFile:function(e){var t=this;if(0!=e.target.files.length){this.up_count=e.target.files.length;var n={};o.a.each(e.target.files,(function(e){n[e.name]={progress:"0%",size:e.size,name:e.name},t.upload_file(e)})),this.uploading=n,$('input[type="file"]').val("")}}}}}).call(this,n("b639").Buffer)},edd4:function(e){e.exports=JSON.parse('{"main-menu":"main menu","file-mgr":"file management","help":"help","svr-addr":"service address","please-cnn":"please connect to ","same-innet":"the same intranet","browse":", use browser to upload or browse files","upload-prompt":"prompts: connecting phone to charger can act as a server, or it will doze off after a while, maybe result in file server unaccessable.","upload-try":"or try to add app to power whitelist","whitelist":"whitelist it","wifi-disconnected":"wifi disconnected, please connect to intranet and try again!","all":"all","image":"image","audio":"audio","video":"video","sort-by-time":"sort by time","sort-by-name":"sort by name","sort-by-type":"sort by type","multi-sel":"multi select","already-exist":"already exist","no-selection":"no selection","create-folder":"create folder","success":"succeeded","fail":"faled","new-folder-name":"new folder name","new-folder":"new-folder","can-not-be-empty":"can not be empty","current-playback":"current playback","none":"none","drag-it-move":"drag this title to move","tip":"tip: ","play-tip":"Can play H264+AAC video, if not, please convert codecs first.","ok":"ok","cancel":"cancel","delete":"delete","move":"move","confirm-del":"deletion confirm","sequence":"sequence","sequence-tip":"play all audio in current dir sequencely and when it\'s over, stop","repeat-dir":"repeat dir","repeat-dir-tip":"play all audio in current dir sequencely and when it\'s over, start over again","single":"single","repeat-one":"repeat one","open-file":"open file","rename-file":"rename","new-file-name":"new file name","same-file":"same file","upload-file":"upload file","browse-file":"browse file","copy-url":"copy url","copy-url-done":"copy file url to clipboard done","scan":"scan","copy-done":"copy content to clipboard done","copy":"copy","close":"close","read-code-content":"read code content","back":"back","change-port":"change port","new-port":"new port","invalid-format":"invalid format","invalid-ports":"service listen port must between [1025-65535]","chg-port-success":"change service port success","chg-port-failed":"change service port failed, target port is occupied","outer":"outer","peer":"peer","my":"my","how-to-setup-ss":"how to setup signaling server","how-to-setup-ss-content":"This signaling server is open sourced, you can run it in your own public server, and set its ip:port address in here. If multiple addresses are available, then you can contact multiple servers\'s peers same time. More info: ","add":"add","settings":"settings","friends":"friends","blacklist":"blacklist","nickname":"nickname","avatar":"avatar","signature":"signature","def_nickname":"passerby","def_signature":"insignificant being","video-chat":"video chat","audio-chat":"audio chat","allow":"allowed","disallow":"disallowed","chg-img":"change image","confirm-disable":"confirm disable","confirm-enable":"confirm enable","add-friend":"add to friend","block-it":"block this guy","connected":"peer","nearby":"neaby channel","world":"world channel","peer-closed":"peer closed","proxy":"proxy info","home-addr":"home addr","upload-home":"upload home","check-pass":"check pass"}')},f106:function(e,t,n){"use strict";n("07ac")}});